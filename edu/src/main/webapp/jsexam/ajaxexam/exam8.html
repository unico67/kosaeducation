<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ajax테스트</title>
<style>
	div {
		border-radius : 10px;
		box-shadow : 5px 5px 10px gray;
	}
</style>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1cc2187c8717ffab77eb12ceab5806ae&libraries=services"></script>
<script>	
	function inputaddress() {
		let addr;
		while(true) {
			addr = window.prompt("주소를 입력하세요.");
			if(addr) {
				break;
			}
			window.alert("주소를 재입력하세요.")
				
		}
		var geocoder = new kakao.maps.services.Geocoder();
		geocoder.addressSearch(addr, function(result, status) {
		     if (status === kakao.maps.services.Status.OK) {
		    	 alert(result[0].y+":"+result[0].x);
		    	const container = document.getElementById('map');
		 		const options = {
		 			center: new kakao.maps.LatLng(result[0].y, result[0].x),
		 			level: 3
		 		};
		 		var map = new kakao.maps.Map(container, options);
		        
		        const marker = new kakao.maps.Marker({
		            map: map,
		            position: new kakao.maps.LatLng(result[0].y, result[0].x)
		        });

		        // 인포윈도우로 장소에 대한 설명을 표시합니다
		        const infowindow = new kakao.maps.InfoWindow({
		            content: '<div style="width:150px;text-align:center;padding:6px 0;">'+addr+'</div>'
		        });
		        infowindow.open(map, marker);
		    } 
		});    
	}
	function clickme() {
		document.getElementById('btn').onclick = inputaddress;
	}
	window.onload = clickme;	
</script>
</head>
<body>
	<h2>주소를 입력받아 지도를 출력하는 프로그램</h2>
	<button id="btn">주소 입력</button>
	<br>
	<br>
	<div id="map" style="width:700px; height:450px;"></div>
</body>
</html>
